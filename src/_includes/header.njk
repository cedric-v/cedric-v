<header id="main-header" class="bg-[#0A6BCE] fixed inset-x-0 top-0 z-50 shadow-md overflow-visible transition-all duration-300">
  <div class="max-w-6xl mx-auto px-4 py-4 flex items-center justify-between relative">
    {% if locale == 'en' %}
    <a href="{{ '/en/' | relativeUrl }}" class="flex flex-col items-start gap-1">
    {% else %}
    <a href="{{ '/' | relativeUrl }}" class="flex flex-col items-start gap-1">
    {% endif %}
      {% image "assets/img/new-logo-cedriv.png", "Fluance Pro", "h-10 w-auto", "eager", "", "400", "200" %}
      <span class="text-xs text-[#FFD700]/80 italic">{% if locale == 'fr' %}Accompagnement pour entrepreneurs{% else %}Coaching for entrepreneurs{% endif %}</span>
    </a>

    <button class="md:hidden text-[#FFD700] z-50 relative" data-menu-toggle aria-label="Open menu">
      <svg class="w-7 h-7" fill="none" stroke="currentColor" stroke-width="1.7" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" d="M4 7h16M4 12h16M4 17h16" />
      </svg>
    </button>

    <nav class="hidden md:flex items-center gap-6 font-medium text-[#FFD700]" data-menu>
      <!-- A propos dropdown -->
      <div class="relative group z-50">
        <button class="hover:opacity-80 transition flex items-center gap-1">
          {% if locale == 'fr' %}A propos{% else %}About{% endif %}
          <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
          </svg>
        </button>
        <div class="absolute top-full left-0 mt-2 w-56 bg-[#0A6BCE] rounded-lg shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 border border-[#FFD700]/20 z-[60]">
          <div class="py-2">
            {% if locale == 'en' %}
            <a href="{{ '/en/a-propos/philosophie/' | relativeUrl }}" class="block px-4 py-2 hover:bg-[#FFD700]/10 transition">Philosophy</a>
            <a href="{{ '/en/a-propos/approche-fluance/' | relativeUrl }}" class="block px-4 py-2 hover:bg-[#FFD700]/10 transition">Fluance Approach</a>
            <a href="{{ '/en/a-propos/histoire-cedric/' | relativeUrl }}" class="block px-4 py-2 hover:bg-[#FFD700]/10 transition">Cédric's Story</a>
            {% else %}
            <a href="{{ '/a-propos/philosophie/' | relativeUrl }}" class="block px-4 py-2 hover:bg-[#FFD700]/10 transition">Philosophie</a>
            <a href="{{ '/a-propos/approche-fluance/' | relativeUrl }}" class="block px-4 py-2 hover:bg-[#FFD700]/10 transition">Approche Fluance Pro</a>
            <a href="{{ '/a-propos/histoire-cedric/' | relativeUrl }}" class="block px-4 py-2 hover:bg-[#FFD700]/10 transition">Parcours de Cédric</a>
            {% endif %}
          </div>
        </div>
      </div>

      <!-- Accompagnement dropdown -->
      <div class="relative group z-50">
        <button class="hover:opacity-80 transition flex items-center gap-1">
          {% if locale == 'fr' %}Accompagnement{% else %}Coaching{% endif %}
          <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
          </svg>
        </button>
        <div class="absolute top-full left-0 mt-2 w-64 bg-[#0A6BCE] rounded-lg shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 border border-[#FFD700]/20 z-[60]">
          <div class="py-2">
            {% if locale == 'en' %}
            <a href="{{ '/en/accompagnement/individuel/' | relativeUrl }}" class="block px-4 py-2 hover:bg-[#FFD700]/10 transition">Individual Coaching</a>
            <a href="{{ '/en/accompagnement/individuel/#what-they-say' | relativeUrl }}" class="block px-4 py-2 hover:bg-[#FFD700]/10 transition">What they say</a>
            <a href="{{ '/en/accompagnement/formules/' | relativeUrl }}" class="block px-4 py-2 hover:bg-[#FFD700]/10 transition">Formulas</a>
            {% else %}
            <a href="{{ '/accompagnement/individuel/' | relativeUrl }}" class="block px-4 py-2 hover:bg-[#FFD700]/10 transition">Accompagnement individuel</a>
            <a href="{{ '/accompagnement/individuel/#ce-quils-en-disent' | relativeUrl }}" class="block px-4 py-2 hover:bg-[#FFD700]/10 transition">Ce qu'ils en disent</a>
            <a href="{{ '/accompagnement/formules/' | relativeUrl }}" class="block px-4 py-2 hover:bg-[#FFD700]/10 transition">Formules</a>
            {% endif %}
          </div>
        </div>
      </div>

      {% if locale == 'en' %}
      <a href="{{ '/en/workshops/clarte/' | relativeUrl }}" class="hover:opacity-80 transition">Clarity Workshop</a>
      {% else %}
      <a href="{{ '/workshops/clarte/' | relativeUrl }}" class="hover:opacity-80 transition">Workshop Clarté</a>
      {% endif %}

      {% if locale == 'en' %}
      <a href="{{ '/en/contact/' | relativeUrl }}" class="hover:opacity-80 transition">Contact</a>
      {% else %}
      <a href="{{ '/contact/' | relativeUrl }}" class="hover:opacity-80 transition">Contact</a>
      {% endif %}
      
      {% if locale == 'en' %}
      <a href="{{ '/en/fluance-particuliers/' | relativeUrl }}" class="hover:opacity-80 transition ml-2 pl-4 border-l border-[#FFD700]/30">Fluance Individuals</a>
      {% else %}
      <a href="{{ '/fluance-particuliers/' | relativeUrl }}" class="hover:opacity-80 transition ml-2 pl-4 border-l border-[#FFD700]/30">Fluance particuliers</a>
      {% endif %}
      
      <div class="flex items-center gap-2 ml-2 pl-4 border-l border-[#FFD700]/30">
        {% if locale == 'fr' %}
          <span class="font-bold text-[#FFD700]">FR</span>
          {% set currentUrl = page.url %}
          {% if currentUrl == '/' %}
            {% set targetUrl = '/en/' %}
          {% elif currentUrl == '/contact/' %}
            {% set targetUrl = '/en/contact/' %}
          {% elif currentUrl == '/fluance-particuliers/' %}
            {% set targetUrl = '/en/fluance-particuliers/' %}
          {% elif currentUrl == '/connexion/' %}
            {% set targetUrl = '/en/connexion/' %}
          {% elif currentUrl == '/cadeau/' %}
            {% set targetUrl = '/en/cadeau/' %}
          {% elif currentUrl == '/confirmation/' %}
            {% set targetUrl = '/en/confirmation/' %}
          {% else %}
            {% set cleanUrl = currentUrl | replace('/fr/', '/') %}
            {% if cleanUrl == '/' %}
              {% set targetUrl = '/en/' %}
            {% else %}
              {% set targetUrl = '/en' + cleanUrl %}
            {% endif %}
          {% endif %}
          <a href="{{ targetUrl | relativeUrl }}" class="text-[#FFD700]/60 hover:text-[#FFD700] hover:opacity-100 transition">EN</a>
        {% else %}
          {% set currentUrl = page.url %}
          {% if currentUrl == '/en/' %}
            {% set targetUrl = '/' %}
          {% else %}
            {% set targetUrl = currentUrl | replace('/en/', '/') %}
          {% endif %}
          <a href="{{ targetUrl | relativeUrl }}" class="text-[#FFD700]/60 hover:text-[#FFD700] hover:opacity-100 transition">FR</a>
          <span class="font-bold text-[#FFD700]">EN</span>
        {% endif %}
      </div>
        </nav>
  </div>

  <!-- Mobile menu -->
  <nav class="md:hidden hidden absolute top-full left-0 right-0 bg-[#0A6BCE] flex-col gap-0 px-4 pb-6 font-medium text-[#FFD700] shadow-lg" data-menu-mobile>
    <div class="border-b border-[#FFD700]/20">
      <button class="w-full text-left py-2 flex items-center justify-between" data-mobile-dropdown="a-propos">
        {% if locale == 'fr' %}A propos{% else %}About{% endif %}
        <svg class="w-4 h-4 transition-transform" data-arrow="a-propos" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
        </svg>
      </button>
      <div class="hidden pl-4 pb-2" data-dropdown-content="a-propos">
        {% if locale == 'en' %}
        <a href="{{ '/en/a-propos/philosophie/' | relativeUrl }}" class="block py-2">Philosophy</a>
        <a href="{{ '/en/a-propos/approche-fluance/' | relativeUrl }}" class="block py-2">Fluance Approach</a>
        <a href="{{ '/en/a-propos/histoire-cedric/' | relativeUrl }}" class="block py-2">Cédric's Story</a>
        {% else %}
        <a href="{{ '/a-propos/philosophie/' | relativeUrl }}" class="block py-2">Philosophie</a>
        <a href="{{ '/a-propos/approche-fluance/' | relativeUrl }}" class="block py-2">Approche Fluance Pro</a>
        <a href="{{ '/a-propos/histoire-cedric/' | relativeUrl }}" class="block py-2">Parcours de Cédric</a>
        {% endif %}
      </div>
    </div>

    <div class="border-b border-[#FFD700]/20">
      <button class="w-full text-left py-2 flex items-center justify-between" data-mobile-dropdown="accompagnement">
        {% if locale == 'fr' %}Accompagnement{% else %}Coaching{% endif %}
        <svg class="w-4 h-4 transition-transform" data-arrow="accompagnement" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
        </svg>
      </button>
      <div class="hidden pl-4 pb-2" data-dropdown-content="accompagnement">
        {% if locale == 'en' %}
        <a href="{{ '/en/accompagnement/individuel/' | relativeUrl }}" class="block py-2">Individual Coaching</a>
        <a href="{{ '/en/accompagnement/individuel/#what-they-say' | relativeUrl }}" class="block py-2">What they say</a>
        <a href="{{ '/en/accompagnement/formules/' | relativeUrl }}" class="block py-2">Formulas</a>
        {% else %}
        <a href="{{ '/accompagnement/individuel/' | relativeUrl }}" class="block py-2">Accompagnement individuel</a>
        <a href="{{ '/accompagnement/individuel/#ce-quils-en-disent' | relativeUrl }}" class="block py-2">Ce qu'ils en disent</a>
        <a href="{{ '/accompagnement/formules/' | relativeUrl }}" class="block py-2">Formules</a>
        {% endif %}
      </div>
    </div>

    {% if locale == 'en' %}
    <a href="{{ '/en/workshops/clarte/' | relativeUrl }}" class="block py-2 border-b border-[#FFD700]/20">Clarity Workshop</a>
    {% else %}
    <a href="{{ '/workshops/clarte/' | relativeUrl }}" class="block py-2 border-b border-[#FFD700]/20">Workshop Clarté</a>
    {% endif %}
    
    {% if locale == 'en' %}
    <a href="{{ '/en/contact/' | relativeUrl }}" class="block py-2 border-b border-[#FFD700]/20">Contact</a>
    {% else %}
    <a href="{{ '/contact/' | relativeUrl }}" class="block py-2 border-b border-[#FFD700]/20">Contact</a>
    {% endif %}
    
    <div class="pt-3 mt-2 border-t border-[#FFD700]/20"></div>
    
    {% if locale == 'en' %}
    <a href="{{ '/en/fluance-particuliers/' | relativeUrl }}" class="block py-2 border-b border-[#FFD700]/20">Fluance Individuals</a>
    {% else %}
    <a href="{{ '/fluance-particuliers/' | relativeUrl }}" class="block py-2 border-b border-[#FFD700]/20">Fluance particuliers</a>
    {% endif %}
    
    <div class="flex items-center justify-center gap-2 py-2">
      {% if locale == 'fr' %}
        <span class="font-bold text-[#FFD700]">FR</span>
        <span class="text-[#FFD700]/40">|</span>
        {% set currentUrl = page.url %}
        {% if currentUrl == '/' %}
          {% set targetUrl = '/en/' %}
        {% elif currentUrl == '/contact/' %}
          {% set targetUrl = '/en/contact/' %}
        {% elif currentUrl == '/fluance-particuliers/' %}
          {% set targetUrl = '/en/fluance-particuliers/' %}
        {% elif currentUrl == '/connexion/' %}
          {% set targetUrl = '/en/connexion/' %}
        {% elif currentUrl == '/cadeau/' %}
          {% set targetUrl = '/en/cadeau/' %}
        {% elif currentUrl == '/confirmation/' %}
          {% set targetUrl = '/en/confirmation/' %}
        {% else %}
          {% set cleanUrl = currentUrl | replace('/fr/', '/') %}
          {% if cleanUrl == '/' %}
            {% set targetUrl = '/en/' %}
          {% else %}
            {% set targetUrl = '/en' + cleanUrl %}
          {% endif %}
        {% endif %}
        <a href="{{ targetUrl | relativeUrl }}" class="text-[#FFD700]/60 hover:text-[#FFD700] hover:opacity-100 transition">EN</a>
      {% else %}
        {% set currentUrl = page.url %}
        {% if currentUrl == '/en/' %}
          {% set targetUrl = '/' %}
        {% else %}
          {% set targetUrl = currentUrl | replace('/en/', '/') %}
        {% endif %}
        <a href="{{ targetUrl | relativeUrl }}" class="text-[#FFD700]/60 hover:text-[#FFD700] hover:opacity-100 transition">FR</a>
        <span class="text-[#FFD700]/40">|</span>
        <span class="font-bold text-[#FFD700]">EN</span>
      {% endif %}
    </div>
  </nav>
</header>
